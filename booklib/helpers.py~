


def auto_download():
    for book, _format in my_book_list:
        search_query = book
        results = search(search_query)
        book_selection = [parse_result(r) for r in results]
        my_bookstore = BookStore(book_selection).sort(_format=_format)
        try:
            selected_book = my_bookstore.pop()
            selected_book.download()
        except HTTPError as e:
            print(e)


def download_book(search_term, _format):
    try:
        results = search(search_term)
        book_selection = [parse_result(r) for r in results]
        my_bookstore = BookStore(book_selection).sort(_format=_format)
    except Exception as e:
        print(e)
        exit(1)
    try:
        selected_book = my_bookstore.pop()
        print('Attempting to download the following book:\n')
        print(selected_book)
        selected_book.download()
    except HTTPError as e:
        print(e)
